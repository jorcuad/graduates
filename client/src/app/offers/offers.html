<div layout-align="center">
	<md-content flex="95">
		<!-- Search bar -->
		<form layout="row">
			<div flex layout="row">
				<div layout="row" flex style="margin-top: 50px">
					<div layout="column" flex>
						<md-input-container style="margin-bottom: 0;">
							<label>Búsqueda de ofertas</label>
							<input name="search" ng-model="$ctrl.search">
						</md-input-container>
					</div>
					<div layout="column">
						<md-button type="submit" class="md-raised md-primary" ng-click="$ctrl.filter()">
							Buscar
						</md-button>
					</div>
				</div>
			</div>
		</form>
		<!-- end search bar -->
	</md-content>
</div>

<md-divider></md-divider>

<!-- Offer list -->
<div ng-cloak ng-show="!logged">
	<md-content layout="row">
		<md-tabs md-dynamic-height md-border-bottom flex="75" layout="column">
			<md-tab label="Ofertas">
				<md-content layout-padding flex="100">
					<md-list flex="100">
						<md-list-item ng-repeat="offer in $ctrl.offers">
							<md-card class="disable" ng-if="display(offer.activity_date, offer.active, offer.public)" flex layout-padding layout="row">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{offer.offer_name}}
										</span>
										<span class="md-subhead" >
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button  ng-disabled="true" href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
							<md-card ng-if="!display(offer.activity_date, offer.active, offer.public)" flex layout-padding layout="row"  >
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{offer.offer_name}}
										</span>
										<span class="md-subhead" >
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>

						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
		</md-tabs>
		<div layout="column" flex>
			<div layout="row" layout-align="center center" style="height: 49px; border-bottom: 1px solid #DCDCDC">
				<md-select placeholder="Categoría" style="font-weight: bold;" ng-model="$ctrl.category">
					<md-option value="{{cat.category_name}}">Categoría</md-option>
					<md-option ng-repeat="cat in $ctrl.categories" value="{{cat.category_name}}">{{cat.category_name}}</md-option>
				</md-select>
			</div>
		</div>
	</md-content>
</div>
<div ng-cloak ng-show="logged">
	<md-content layout="row">
		<md-tabs md-dynamic-height md-border-bottom flex layout="column">
			<md-tab label="Ofertas">
				<md-content layout-padding flex="100">
					<md-list flex="100">
						<md-list-item ng-repeat="offer in $ctrl.offers | filter:{ user:{ id: '!' + user.id } }" >
							<md-card flex layout-padding layout="row" class="disable" ng-if="display(offer.activity_date, offer.active, offer.public)">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{offer.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}									
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button ng-disabled="true"  href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
							<md-card flex layout-padding layout="row" ng-if="!display(offer.activity_date, offer.active, offer.public)" >
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{offer.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}									
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-alingn="end center">
									<md-button href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
			<md-tab label="Creadas por mi" >
				<md-content layout-padding flex="100">
					<md-list flex="100">
						<md-list-item ng-repeat="offer in $ctrl.offers | filter:{ user:{ id:user.id } }" >
							<md-card flex layout-padding layout="row" class="disable" ng-if="display(offer.activity_date, offer.active, offer.public)">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline" layout="row">
											<div layout="column" flex="70">
												{{offer.offer_name}}
											</div>
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button  href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
							<md-card flex layout-padding layout="row" ng-if="!display(offer.activity_date, offer.active, offer.public)">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline" layout="row">
											<div layout="column" flex="70">
												{{offer.offer_name}}
											</div>
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>							
						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
			<md-tab label="Favoritos" >
				<md-content layout-padding flex="100">
					<md-list flex="100">
						<md-list-item ng-repeat="fav in $ctrl.favorites" >
							<md-card flex layout-padding layout="row" class="disable" ng-if="display(offer.activity_date, offer.active, offer.public)">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{fav.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{fav.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{fav.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{fav.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button ng-disabled="true" href="#/detail/{{fav.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
							<md-card flex ng-if="!display(offer.activity_date, offer.active, offer.public)" layout-padding layout="row">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{fav.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{fav.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{fav.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{fav.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{fav.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>

						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
		</md-tabs>
		<div layout="column" flex="25">
			<div layout="row" layout-align="center center" style="height: 49px; border-bottom: 1px solid #DCDCDC">
				<md-select ng-change="$ctrl.filter()" placeholder="Categoría" style="font-weight: bold;" ng-model="$ctrl.category">
					<md-option value="{{cat.category_name}}">Categoría</md-option>
					<md-option ng-repeat="cat in $ctrl.categories" value="{{cat.category_name}}">{{cat.category_name}}</md-option>
				</md-select>
			</div>
		</div>
	</md-content>
</div>
<!--end Offer list -->
